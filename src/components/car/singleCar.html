<head>
    <link rel="stylesheet" href="/src/components/car/singleCar.css">
</head>

<div class="car-booking-container">
    <!-- Left: Car Details -->
    <div class="single-car-container" ng-if="car">
        <h1>{{ car.carName }} ({{ car.carModel }})</h1>

        <!-- Car Image (Clickable for Modal) -->
        <div class="car-image" ng-click="openModal(car.vehicleImages)">
            <img ng-src="{{ car.vehicleImages[0] }}" alt="{{ car.carName }}">
        </div>

        <!-- Car Details -->
        <div class="car-info">
            <p><strong>Price:</strong> ${{ car.carPrice }} per day or bid </p>
            <p><strong>Type:</strong> {{ car.carType }}</p>
            <p><strong>Category:</strong> {{ car.category }}</p>
            <p><strong>Mileage:</strong> {{ car.mileage }} kmpl</p>
            <p><strong>Car No:</strong> {{ car.car_no }}</p>
            <p><strong>Location:</strong> {{ car.location }}</p>

            <!-- Features -->
            <div class="features">
                <strong>Features:</strong>
                <span ng-if="car.features.GPS">GPS,</span>
                <span ng-if="car.features.Sunroof">Sunroof,</span>
                <span ng-if="car.features.Bluetooth">Bluetooth,</span>
                <span ng-if="car.features.RearCamera">Rear Camera,</span>
                <span ng-if="car.features.HeatedSeats">Heated Seats</span>
            </div>
        </div>

        <!-- Owner Details -->
        <div class="owner-info">
            <h3>Owner Information</h3>
            <p><strong>Name:</strong> {{ car.owner.firstName }} {{ car.owner.lastName }}</p>
            <p><strong>Username:</strong> {{ car.owner.username }}</p>
            <p><strong>City:</strong> {{ car.owner.city }}</p>
            <p><strong>Email:</strong> {{ car.owner.email }}</p>
            <p> <strong>chat with owner? :</strong></p>
        </div>
    </div>

    <!-- Right: Book Car Form -->
    <div class="book-car-form">
        <h2>Book This Car</h2>
        <form ng-submit="submitBooking()">
            <label for="bidder">Your Username:</label>
            <input type="text" id="bidder" ng-model="booking.bidder.username" required>

            <label for="amount">Bid Amount:</label>
            <input type="number" id="amount" ng-model="booking.amount" required>

            <label for="createdAt">Booking StartDate :</label>
            <input type="date" id="createdAt" ng-model="booking.startDate" required>
            <label for="createdAt">Booking EndDate :</label>
            <input type="date" id="createdAt" ng-model="booking.endDate" required>
            dropdown for location
            <label for="location">Location:</label>
            <select id="location" name="location" ng-model="booking.location" required>
                <option value="" disabled selected>Select Location Type</option>
                <option value="local">Local</option>
                <option value="outstation">Outstation</option>
                <option value="both">Both</option>
            </select>

            <button type="submit">Place Booking</button>
        </form>
    </div>
</div>

<!-- Modal for Image Gallery -->
<div class="modal" ng-if="isModalOpen">
    <div class="modal-content">
        <span class="close" ng-click="closeModal()">&times;</span>
        <div class="image-grid">
            <img ng-repeat="img in car.vehicleImages" ng-src="{{ img }}" alt="Car Image">
        </div>
    </div>
</div>
